import scrapy
import csv

class routeSpider(scrapy.Spider):

	name = "areaScrape"
	allowed_domains = ['www.mountainproject.com']
	start_urls = ['https://www.mountainproject.com/route/107819839/project-2',
	'https://www.mountainproject.com/route/107819812/project',
	'https://www.mountainproject.com/route/107819829/boom',
	'https://www.mountainproject.com/route/107819819/blast-off',
	'https://www.mountainproject.com/route/110946139/tricuspid-clingon',
	'https://www.mountainproject.com/route/114339087/perplexed',
	'https://www.mountainproject.com/route/107223383/monkey-hug',
	'https://www.mountainproject.com/route/110973121/crimpin-to-freedom',
	'https://www.mountainproject.com/route/108276882/compressed-leprechaun',
	'https://www.mountainproject.com/route/110973103/busch-league',
	'https://www.mountainproject.com/route/108276851/bicuspid-helicoprion',
	'https://www.mountainproject.com/route/114323490/beyond-ripe',
	'https://www.mountainproject.com/route/109202148/mountaineers-route',
	'https://www.mountainproject.com/route/110033576/vulcan-crawl',
	'https://www.mountainproject.com/route/106549491/viable-option',
	'https://www.mountainproject.com/route/106549500/unknown-511a',
	'https://www.mountainproject.com/route/114427175/unknown',
	'https://www.mountainproject.com/route/108222223/tweak',
	'https://www.mountainproject.com/route/108292695/trench-warfare',
	'https://www.mountainproject.com/route/111963787/train-fest',
	'https://www.mountainproject.com/route/110033749/super-tweak',
	'https://www.mountainproject.com/route/108201881/sportfest',
	'https://www.mountainproject.com/route/109361319/slugfest',
	'https://www.mountainproject.com/route/107532005/secret-sharer',
	'https://www.mountainproject.com/route/105741080/praise-the-lowered',
	'https://www.mountainproject.com/route/109429029/organ-grinder',
	'https://www.mountainproject.com/route/105741032/oboe',
	'https://www.mountainproject.com/route/108184553/moratorium',
	'https://www.mountainproject.com/route/107741178/minnowmaker',
	'https://www.mountainproject.com/route/105741071/gang-of-four',
	'https://www.mountainproject.com/route/108176476/first-blood',
	'https://www.mountainproject.com/route/108794953/dwarfs-dilema',
	'https://www.mountainproject.com/route/107827492/dihedral-route',
	'https://www.mountainproject.com/route/108213061/crimpfest',
	'https://www.mountainproject.com/route/105741029/coast-to-coast',
	'https://www.mountainproject.com/route/113322756/chinese-connection',
	'https://www.mountainproject.com/route/106515061/bolt-ladder',
	'https://www.mountainproject.com/route/108184536/blank-out',
	'https://www.mountainproject.com/route/110033753/blackout',
	'https://www.mountainproject.com/route/108195046/bio-fest',
	'https://www.mountainproject.com/route/108375682/bejing',
	'https://www.mountainproject.com/route/113322778/the-bassoon',
	'https://www.mountainproject.com/route/109428917/around-the-world',
	'https://www.mountainproject.com/route/107742732/utah-beta',
	'https://www.mountainproject.com/route/108194442/two-face',
	'https://www.mountainproject.com/route/107743518/revenge',
	'https://www.mountainproject.com/route/106813791/ralphs-song',
	'https://www.mountainproject.com/route/107735729/psycho-tectonics',
	'https://www.mountainproject.com/route/106813668/pickled-eel',
	'https://www.mountainproject.com/route/106455552/pet-piranha',
	'https://www.mountainproject.com/route/107742803/oughtamatic',
	'https://www.mountainproject.com/route/107742812/notamatic',
	'https://www.mountainproject.com/route/107742779/master-beta',
	'https://www.mountainproject.com/route/107467302/line-of-duty',
	'https://www.mountainproject.com/route/106813656/elopement-ladder',
	'https://www.mountainproject.com/route/107742785/dog-sense',
	'https://www.mountainproject.com/route/106813675/the-cross',
	'https://www.mountainproject.com/route/107743505/chips-ahoy',
	'https://www.mountainproject.com/route/107742792/bark',
	'https://www.mountainproject.com/route/107742760/adventure-climb',
	'https://www.mountainproject.com/route/108194424/the-air-conditioner',
	'https://www.mountainproject.com/route/106373235/twitterpation',
	'https://www.mountainproject.com/route/108361743/trix',
	'https://www.mountainproject.com/route/106373240/smitten',
	'https://www.mountainproject.com/route/106373304/ncmo',
	'https://www.mountainproject.com/route/106373248/hooked',
	'https://www.mountainproject.com/route/106373217/the-flirt',
	'https://www.mountainproject.com/route/107802677/slant-crack',
	'https://www.mountainproject.com/route/106545589/short-handed-goal',
	'https://www.mountainproject.com/route/107473151/one-eyed-rosie',
	'https://www.mountainproject.com/route/106018105/the-lost-bolt',
	'https://www.mountainproject.com/route/106018121/jolly-mon',
	'https://www.mountainproject.com/route/107629296/body-brewser',
	'https://www.mountainproject.com/route/106545585/alyosha',
	'https://www.mountainproject.com/route/115158377/trimming-hedges',
	'https://www.mountainproject.com/route/105869813/tooth-and-nail',
	'https://www.mountainproject.com/route/105796332/tiny-toons',
	'https://www.mountainproject.com/route/105869804/terminalogical-inexactitude',
	'https://www.mountainproject.com/route/105869809/tennis-ball',
	'https://www.mountainproject.com/route/106516921/super-cannon-ball',
	'https://www.mountainproject.com/route/113327647/satuday-mourning',
	'https://www.mountainproject.com/route/106516927/the-pansy',
	'https://www.mountainproject.com/route/106819362/not',
	'https://www.mountainproject.com/route/106516932/nebulous-precision',
	'https://www.mountainproject.com/route/112104992/mutation',
	'https://www.mountainproject.com/route/105869792/mission-statement',
	'https://www.mountainproject.com/route/106819366/mighty-mouse',
	'https://www.mountainproject.com/route/108123070/man-and-woman',
	'https://www.mountainproject.com/route/105869709/limestone-cowboy',
	'https://www.mountainproject.com/route/107523812/lieback-crack',
	'https://www.mountainproject.com/route/107827457/jam-crack',
	'https://www.mountainproject.com/route/107833371/illusions-extension-2',
	'https://www.mountainproject.com/route/107833359/illusions-extension-1',
	'https://www.mountainproject.com/route/105796335/illusions',
	'https://www.mountainproject.com/route/113327520/hyperplasia',
	'https://www.mountainproject.com/route/107830688/gills-grace',
	'https://www.mountainproject.com/route/112290714/garden-of-cucumbers',
	'https://www.mountainproject.com/route/106008962/flying-outhouse',
	'https://www.mountainproject.com/route/106425625/drilling-in-the-dark',
	'https://www.mountainproject.com/route/107330285/dream-realized',
	'https://www.mountainproject.com/route/106016278/cushions',
	'https://www.mountainproject.com/route/105796338/community-effort',
	'https://www.mountainproject.com/route/106707726/cling-or-swing',
	'https://www.mountainproject.com/route/112104944/chromosone-y',
	'https://www.mountainproject.com/route/112104872/chromosone-x',
	'https://www.mountainproject.com/route/105929937/cannonball',
	'https://www.mountainproject.com/route/107823681/butt-ball',
	'https://www.mountainproject.com/route/107835078/black-knight',
	'https://www.mountainproject.com/route/113327599/bird-shit-banana-split',
	'https://www.mountainproject.com/route/105869796/begging-for-bolts',
	'https://www.mountainproject.com/route/105869786/adios-amigos',
	'https://www.mountainproject.com/route/107174280/the-yeti',
	'https://www.mountainproject.com/route/111004294/tools-are-for-fools',
	'https://www.mountainproject.com/route/115189141/secret-stairs',
	'https://www.mountainproject.com/route/109213693/samsquanch',
	'https://www.mountainproject.com/route/115189109/mordor',
	'https://www.mountainproject.com/route/113089791/gollum',
	'https://www.mountainproject.com/route/107174264/the-goblin',
	'https://www.mountainproject.com/route/108255917/calcaneous',
	'https://www.mountainproject.com/route/107174300/2',
	'https://www.mountainproject.com/route/107174293/1',
	'https://www.mountainproject.com/route/105740726/kentucky-fried-penguin',
	'https://www.mountainproject.com/route/105740729/kentucky-fried-chicken',
	'https://www.mountainproject.com/route/107547992/lovely-cruise',
	'https://www.mountainproject.com/route/108073359/gravity-storm',
	'https://www.mountainproject.com/route/107548025/fins',
	'https://www.mountainproject.com/route/107548013/apacalypso',
	'https://www.mountainproject.com/route/107548035/12-volt-man',
	'https://www.mountainproject.com/route/114083913/zig-zag',
	'https://www.mountainproject.com/route/112775784/voodoo-child',
	'https://www.mountainproject.com/route/106008992/talk-of-the-town',
	'https://www.mountainproject.com/route/106008980/sweet-bonsai',
	'https://www.mountainproject.com/route/106515069/summer-resort',
	'https://www.mountainproject.com/route/106674153/stormin-norman',
	'https://www.mountainproject.com/route/114588432/spin-doctor',
	'https://www.mountainproject.com/route/114083844/shabby',
	'https://www.mountainproject.com/route/106548962/problem-child',
	'https://www.mountainproject.com/route/107741208/pig-in-a-python',
	'https://www.mountainproject.com/route/106606000/paleface',
	'https://www.mountainproject.com/route/106674146/order-and-chaos',
	'https://www.mountainproject.com/route/106674127/nuclear-fingers',
	'https://www.mountainproject.com/route/106834232/nuclear-fallout',
	'https://www.mountainproject.com/route/114081237/not-too-slabby',
	'https://www.mountainproject.com/route/114081266/not-too-shabby',
	'https://www.mountainproject.com/route/113288267/hvala',
	'https://www.mountainproject.com/route/106554917/heat-miser',
	'https://www.mountainproject.com/route/106674140/hat-trick',
	'https://www.mountainproject.com/route/106674118/goat-debris',
	'https://www.mountainproject.com/route/106674158/friendly-fire',
	'https://www.mountainproject.com/route/106813632/finger-fire',
	'https://www.mountainproject.com/route/106674133/conventional-ams',
	'https://www.mountainproject.com/route/107025434/chimney',
	'https://www.mountainproject.com/route/114081191/children-of-the-moss',
	'https://www.mountainproject.com/route/106834198/burning-from-the-inside',
	'https://www.mountainproject.com/route/113288319/bit-of-fun',
	'https://www.mountainproject.com/route/106834208/the-abscess',
	'https://www.mountainproject.com/route/111005532/z-crack',
	'https://www.mountainproject.com/route/110138346/north-west-face',
	'https://www.mountainproject.com/route/106018116/spanner-in-the-works',
	'https://www.mountainproject.com/route/106756488/seldom-seen',
	'https://www.mountainproject.com/route/106018112/cracker-jack',
	'https://www.mountainproject.com/route/107473142/bonnie',
	'https://www.mountainproject.com/route/107159354/serotonin',
	'https://www.mountainproject.com/route/107159369/old-glory',
	'https://www.mountainproject.com/route/107261007/mullein',
	'https://www.mountainproject.com/route/107174314/mister-cruel',
	'https://www.mountainproject.com/route/107827468/leary-ledges',
	'https://www.mountainproject.com/route/107174322/labor-and-delivery',
	'https://www.mountainproject.com/route/107159400/jack-be-nimble',
	'https://www.mountainproject.com/route/109095513/im-blue-im-a-dog-im-a-dog',
	'https://www.mountainproject.com/route/110409535/graham-slam',
	'https://www.mountainproject.com/route/107177618/final-hurrah',
	'https://www.mountainproject.com/route/108175926/bowling-for-cars',
	'https://www.mountainproject.com/route/109543683/blackstreak-boys',
	'https://www.mountainproject.com/route/107174332/bellingham-blues',
	'https://www.mountainproject.com/route/107177604/26-bananas',
	'https://www.mountainproject.com/route/107737810/no-name',
	'https://www.mountainproject.com/route/107851679/murder-face',
	'https://www.mountainproject.com/route/106835381/hang-on-to-your-ego',
	'https://www.mountainproject.com/route/106835390/cracker-jack',
	'https://www.mountainproject.com/route/106790599/20-degrees',
	'https://www.mountainproject.com/route/106791752/b-team',
	'https://www.mountainproject.com/route/106791759/up-your-face',
	'https://www.mountainproject.com/route/106791764/my-other-brother-darrell',
	'https://www.mountainproject.com/route/106821193/north-face',
	'https://www.mountainproject.com/route/106821188/east-face',
	'https://www.mountainproject.com/route/107515290/wet-dream',
	'https://www.mountainproject.com/route/107515296/the-restless-part-of-everyone',
	'https://www.mountainproject.com/route/107515271/johnnys-project',
	'https://www.mountainproject.com/route/107515276/in-flight-entertainment',
	'https://www.mountainproject.com/route/107515281/dancing-on-the-tile',
	'https://www.mountainproject.com/route/107515324/the-cheese-grater',
	'https://www.mountainproject.com/route/107515318/cabin-fever',
	'https://www.mountainproject.com/route/107515285/bobs-project',
	'https://www.mountainproject.com/route/107747832/shocking-the-shaman',
	'https://www.mountainproject.com/route/113512940/shame-on-the-shockers',
	'https://www.mountainproject.com/route/107814043/pop-culture',
	'https://www.mountainproject.com/route/113512893/going-to-church',
	'https://www.mountainproject.com/route/113512950/buddhafied',
	'https://www.mountainproject.com/route/106657095/last-chance-falls',
	'https://www.mountainproject.com/route/106813875/to-stand-on',
	'https://www.mountainproject.com/route/106813897/pika-angst',
	'https://www.mountainproject.com/route/114407409/myopic-vision',
	'https://www.mountainproject.com/route/106813811/mr-jingles',
	'https://www.mountainproject.com/route/114435702/little-bee',
	'https://www.mountainproject.com/route/106813919/hummer',
	'https://www.mountainproject.com/route/108212830/happy-ending',
	'https://www.mountainproject.com/route/106813844/girls-do-pinchlingue',
	'https://www.mountainproject.com/route/106820033/fuzzy-navel',
	'https://www.mountainproject.com/route/106820038/callalo',
	'https://www.mountainproject.com/route/107842250/blinded-by-the-light',
	'https://www.mountainproject.com/route/106593862/black-mouse-speaks',
	'https://www.mountainproject.com/route/107523876/black-elk-speaks',
	'https://www.mountainproject.com/route/107802872/bitty-bee',
	'https://www.mountainproject.com/route/107725263/basted-pikas',
	'https://www.mountainproject.com/route/106813825/ag-tumnus',
	'https://www.mountainproject.com/route/105740798/well-hung-start',
	'https://www.mountainproject.com/route/105740804/slip-and-cruise',
	'https://www.mountainproject.com/route/105740801/roof-problem',
	'https://www.mountainproject.com/route/105740813/overhang-bypass',
	'https://www.mountainproject.com/route/107467342/hungarian-horntail',
	'https://www.mountainproject.com/route/105740810/free-solo',
	'https://www.mountainproject.com/route/105740807/crusin',
	'https://www.mountainproject.com/route/106736892/bluebeard',
	'https://www.mountainproject.com/route/106758073/haylees-day-off',
	'https://www.mountainproject.com/route/106760064/dobby',
	'https://www.mountainproject.com/route/107743575/scared-sheepless',
	'https://www.mountainproject.com/route/107743580/17-seconds',
	'https://www.mountainproject.com/route/107594097/parallelogram',
	'https://www.mountainproject.com/route/115170973/the-fall-of-mann',
	'https://www.mountainproject.com/route/110761204/diabetics-are-sweet',
	'https://www.mountainproject.com/route/111796581/bloom-and-breathe',
	'https://www.mountainproject.com/route/110761012/bizarre-garb',
	'https://www.mountainproject.com/route/108733269/bee-true',
	'https://www.mountainproject.com/route/109095490/supernova',
	'https://www.mountainproject.com/route/107465740/sunkissed',
	'https://www.mountainproject.com/route/107477983/sun-dance',
	'https://www.mountainproject.com/route/109095465/sort-of-eclipse',
	'https://www.mountainproject.com/route/107467280/solar-power',
	'https://www.mountainproject.com/route/111849337/sound-show-left',
	'https://www.mountainproject.com/route/106192772/love-and-simplicity',
	'https://www.mountainproject.com/route/110293243/whispering-voices',
	'https://www.mountainproject.com/route/110293336/tangential-acceleration',
	'https://www.mountainproject.com/route/110293378/advanced-dynamics',
	'https://www.mountainproject.com/route/110293563/314',
	'https://www.mountainproject.com/route/107473244/theivin-my-pocket',
	'https://www.mountainproject.com/route/106801520/take-a-shirt',
	'https://www.mountainproject.com/route/107743540/shakis',
	'https://www.mountainproject.com/route/107131362/prelude-to-an-illness',
	'https://www.mountainproject.com/route/106821160/poke-the-pocket',
	'https://www.mountainproject.com/route/106030493/holy-toledo',
	'https://www.mountainproject.com/route/106641983/the-fairy',
	'https://www.mountainproject.com/route/106166165/betagraphic',
	'https://www.mountainproject.com/route/106456846/bad-harmony',
	'https://www.mountainproject.com/route/106191104/babe-a-licious',
	'https://www.mountainproject.com/route/106383242/alpha-graphic',
	'https://www.mountainproject.com/route/107765508/petrified',
	'https://www.mountainproject.com/route/107765526/fossilized',
	'https://www.mountainproject.com/route/107765488/brier-rabbit',
	'https://www.mountainproject.com/route/107793287/poopsmith',
	'https://www.mountainproject.com/route/107793267/high-five',
	'https://www.mountainproject.com/route/107793272/black-lung',
	'https://www.mountainproject.com/route/106835359/swedish-finger-yams',
	'https://www.mountainproject.com/route/109518614/sunhat-memo',
	'https://www.mountainproject.com/route/106835321/patern-of-fate',
	'https://www.mountainproject.com/route/106835330/harpua',
	'https://www.mountainproject.com/route/106835345/good-medicine',
	'https://www.mountainproject.com/route/106835349/doctor-feel-good',
	'https://www.mountainproject.com/route/112334469/shades-of-gray',
	'https://www.mountainproject.com/route/112333800/razzmatazz',
	'https://www.mountainproject.com/route/112334605/orange-is-the-new-crimp',
	'https://www.mountainproject.com/route/112334678/once-you-go-black',
	'https://www.mountainproject.com/route/112334661/nerdy-by-nature',
	'https://www.mountainproject.com/route/112334667/meh',
	'https://www.mountainproject.com/route/112333772/jericolor',
	'https://www.mountainproject.com/route/112334497/dreamsicle',
	'https://www.mountainproject.com/route/112334517/chain-reaction',
	'https://www.mountainproject.com/route/112334555/brown-noser',
	'https://www.mountainproject.com/route/113087097/stair-stepper',
	'https://www.mountainproject.com/route/113087224/pins-and-needles',
	'https://www.mountainproject.com/route/105796328/half-face',
	'https://www.mountainproject.com/route/107194847/wildflower',
	'https://www.mountainproject.com/route/107194813/uncertainty',
	'https://www.mountainproject.com/route/107194832/tendonitis-be-damned',
	'https://www.mountainproject.com/route/116067553/recovery',
	'https://www.mountainproject.com/route/107194852/end-of-the-silence',
	'https://www.mountainproject.com/route/107194821/brown-eyed-girl']

	def parse(self, response):
		count_stars= len(response.xpath('//*[@id="starsWithAvgText-107819829"]/span/img'))
		#I COULD PROBABLY DO A HEADING SEARCH FOR DESCRIPTION, PROTECTION AND LOCATION ALL IN ONE?
		descriptionString = ""
		descriptionArray = [3, 2]
		for i in descriptionArray:
			if response.xpath('//*[@id="route-page"]/div/div[3]/div[1]/div[' + str(i) + ']/div[1]/h2/text()').extract_first() == ("\n            Description\n            "):
				descriptionString = response.xpath('//*[@id="route-page"]/div/div[3]/div[1]/div[' + str(i) + ']/div[1]/div/text()').extract_first()
		protectionString = ""
		protectionArray = [3, 2]
		protectionArray2 = [3, 2]
		for i in protectionArray:
			for j in protectionArray2:
				if response.xpath('//*[@id="route-page"]/div/div[3]/div[1]/div[' + str(i) + ']/div[' + str(j) + ']/h2/text()').extract_first() == ("\n            Protection\n            "):
					protectionString = response.xpath('//*[@id="route-page"]/div/div[3]/div[1]/div[' + str(i) + ']/div[' + str(j) + ']/div/text()').extract_first()

		yield {
				'area_name': response.xpath('//*[@id="route-page"]/div/div[1]/div[2]/a[5]/text()').extract_first(),
				'route_name': response.xpath('//*[@id="route-page"]/div/div[1]/h1/text()').extract_first(),
				'yds_rating': response.xpath('//*[@id="route-page"]/div/div[1]/h2/span[1]/text()').extract_first(),
				'user_rating': count_stars,
				'climb_type_and_height': response.xpath('//*[@id="route-page"]/div/div[3]/div[1]/div[1]/div[1]/table//tr[1]/td[2]/text()').extract_first(),
				'first_ascent': response.xpath('//*[@id="route-page"]/div/div[3]/div[1]/div[1]/div[1]/table//tr[2]/td[2]/text()').extract(),
				'description': descriptionString,
				'protection': protectionString,
			}






